<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from try.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>try</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="Standard style for Kirikiri related references" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="To top" />
</head>
<body>
<h1><a id="id373" name="id373">Exception Handling</a>
</h1><div class="para"><div>
<a id="id374" name="id374" class="targanchor"><dfn>Undefined behaviours</dfn></a> or "exceptions", are not considered normal processing, and in many cases are interchangable with "errors".<br />
</div></div>
<h1><a id="id375" name="id375">Where exception occurs</a>
</h1><div class="para"><div>
　Exceptions can occur anywhere in a program. <br />
　Throwing an exception is also known as "throwing an exception".<br />
　For example, consider the following script:<br />
<br />

<br />
<code class="bq"><span class="weak">Usage:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&quot;3%0&quot;!;&nbsp;<span class="comment">//Attempted to divide by zero here; exception raised</span></code>
<br />

<br />
　This can obviously lead to exceptions, but in some cases it is not clear whether they will occur or not.<br />
</div></div>
<h1><a id="id376" name="id376">Catching exceptions</a>
</h1><div class="para"><div>
 The <code class="inlinecode"><a id="id377" name="id377" class="targanchor"><dfn>try</dfn></a></code> and <code class="inlinecode"><a id="id378" name="id378" class="targanchor"><dfn>catch</dfn></a></code> keywords can be used to capture exceptions.<br />
　For example, the following script could be written to catch any exceptions that might occur in the above example.<br />
<br />

<br />
<code class="bq"><span class="weak">Usage:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;<span class="comment">//&nbsp;To check whether an exception occurs</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func1();&nbsp;<span class="comment">//&nbsp;An exception might occur here</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;<span class="comment">//&nbsp;For catching (or capturing) exceptions</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;In the event of an exception, this block will be executed.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;The image cannot be loaded.&quot;);&nbsp;<span class="comment">//&nbsp;Display a message</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

<br />
　In this way, if you write an action that may cause an exception in the try block, the catch block will execute when the exception occurs. You can write error handling neatly like this. Error handling can be neatly written in this way.<br />
<br />
　If no exceptions occur in the try block, the catch block will not be executed.<br />
<br />
　Anything can be written in a try block. In some cases, as in this example, there is a clear possibility that an exception will occur on that line, but if an exception occurs at the end of a function call or at the end of another function call, you can write "try. .catch", which will bring you back here when the exception occurs.<br />
<br />
　If an exception occurs, the remaining processing in the block is interrupted and returns to the location of the try.<br />
<br />
　
If an exception occurs in the catch block, it will not be caught there. If no other try catch block is in place, the exception will be thrown back up the call stack to the point where the function was called.<br />
<br />
　It is possible that another exception may occur between the time an exception is thrown and the catch block is reached, but the behavior is undefined.<br />
<br />
　If an exception is not caught anywhere in the script, the exception is passed to the application where it is handled.<br />
<br /><div class="note"><div class="notehead"><span class="noteheadspan">Note</span></div>
Normally, such an exception will abort execution as an error, so it is recommended that you try to write "try. .catch" blocks in places where errors are likely to occur.</div><br />
</div></div>
<h1><a id="id379" name="id379">Exception objects</a>
</h1><div class="para"><div>
Various information about the exception is thrown with an object of the <a id="id380" name="id380" class="targanchor"><dfn>Exception</dfn></a> class. This object is called an exception object. It can be received in a catch.<br />

<br />
<code class="bq"><span class="weak">Usage:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadImages(&quot;nothing.jpeg&quot;);&nbsp;<span class="comment">//&nbsp;Functions that may raise an exception</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;(e)&nbsp;<span class="comment">//&nbspReceive exception in variable called &nbsp;e&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;e.message&nbsp; represents the message string thrown together with the exception.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;This may explain why the exception had occurred.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;Unable to load image. \n&quot;+e.message);<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

　This way, you can write the variable you want to receive after catch, and receive the exception object in that variable.<br />
　The scope of this variable starts with the next block after the catch and ends with this block. This variable does not need to be declared beforehand.<br />
</div></div>
<h1><a id="id381" name="id381">the throw statement</a>
</h1><div class="para"><div>
 You can also throw an exception manually. To throw an exception, use the <code class="inlinecode"><a id="id382" name="id382" class="targanchor"><dfn>throw</dfn></a></code> keyword.<br />
　For example, you can write a script like the following:<br />

<br />
<code class="bq"><span class="weak">Usage:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;pow2(n)<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//Compute &nbsp;2&nbsp; to the &nbsp;nth&nbsp; power, where &nbsp;n&nbsp; must be a positive integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(n&lt;0)&nbsp;throw&nbsp;new&nbsp;Exception(&quot;Negative numbers cannot be specified.&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp; causes an exception.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1&lt;&lt;n;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

　If a negative number such as -1 is passed as an argument to this function, an exception will occur. The following statement throws the exception.<br />
<br />

<br />
<code class="bq">throw&nbsp;new&nbsp;Exception(&quot;Negative numbers cannot be specified.&quot;);</code>
<br />

<br />
As for <code class="inlinecode">new Exception("Negative numbers cannot be specified")</code>, it creates an object of the Exception class with a string as an argument. See Exception class for details. This newly created object is then thrown with the throw keyword.<br />
　The throw keyword can be used to throw objects that are not instances of the Exception class.You can throw a reference to a function, whether it's a number or a string. However, it's recommended that you throw an object derived from the Exception class. When you catch it, you can assume that the object in the catch block will be an Exception object.<br />
</div></div>
<h1><a id="id383" name="id383">Rethrowing exceptions</a>
</h1><div class="para"><div>
　Although it is good practice to capture exceptions with catch, there may be a try somewhere that can still receive exceptions, in which case you can throw the exception again.<br />
　You can write scripts like the following: <br />

<br />
<code class="bq"><span class="weak">Usage:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;tryloadimage()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;primaryLayer.loadImages(&quot;test1.bmp&quot;);&nbsp;<span class="comment">//Accessing &nbsp;test1.bmp&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch(e)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inform(&quot;The image failed to load.&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;e;&nbsp;<span class="comment">//&nbsp;Display a message but throw an exception again</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;test()<br />
&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//Calls &nbsp;tryloadingimage&nbsp;, and returns &nbsp;true&nbsp; if it succeeds.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Otherwise, return false.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tryloadimage();<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
</code>
<br />

Here, if test() is called and the image fails to load, a message will be displayed using the inform method, but since the exception is thrown again, it can be caught by the catch in the test function.<br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
