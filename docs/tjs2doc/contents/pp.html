<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<!-- generated by to_html.pl from pp.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Preprocessor</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="吉里吉里関連リファレンス用標準スタイル" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="to top" />
</head>
<body>
<h1><a id="id273" name="id273">Preprocessor</a>
</h1><div class="para"><div>
TJS2 supports conditional compilation expressions (similar to C's #if and #endif). This is processed before the script is actually interpreted, and conditions can be used to prevent or allow parts of the script to be interpreted or processed。<br />
　Conditionally compiled expressions are written in freestyle, unlike C preprocessor directives, and can be written anywhere. You don't have to write only one directive per line like the C directive.<br />
</div></div>
<h1><a id="id275" name="id275">@set Directive</a>
</h1><div class="para"><div>
　The @set directive evaluates the conditional compilation expression and discards the result. The syntax is as follows:
<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;@set(condition)<br />
</code>
<br />

　You write a conditional compilation expression in "condition". You can use the following operators here:。<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;&nbsp;=&nbsp;&nbsp;!=&nbsp;&nbsp;==&nbsp;&nbsp;||&nbsp;&nbsp;&amp;&amp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;&nbsp;&amp;&nbsp;&nbsp;&lt;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&lt;=&nbsp;&nbsp;&gt;=&nbsp;&nbsp;+&nbsp;&nbsp;-&nbsp;&nbsp;%&nbsp;&nbsp;*&nbsp;&nbsp;/&nbsp;&nbsp;!&nbsp;&nbsp;+&nbsp;&nbsp;-&nbsp;&nbsp;(&nbsp;)<br />
</code>
<br />

　See <a target="main" class="jump" href="expr_and_op.html">Expressions and Operators</a> for the meaning of these operators. However, only integers can be handled. <br />
　You can also use any variable or immediate value. For variable naming conventions, the same conventions for <a target="main" class="jump" href="token.html">token</a> naming conventions and immediate values apply as well.<br />
　However, the variables used in the preprocessor and the variables used in the TJS2 script do not interfere (do not share the same namespace).<br />
</div></div>
<h1><a id="id276" name="id276">@if directive, @endif directive</a>
</h1><div class="para"><div>
　The @if directive evaluates the conditional compilation expression, and if the result is 0 (false), it does not interpret it until the next @endif. If the result is non-zero, it will be interpreted.<br />
　The syntax is as follows:<br />

<br />
<code class="bq">&nbsp;&nbsp;&nbsp;&nbsp;@if(condition)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
</code>
<br />

&nbsp;&nbsp;&nbsp;&nbsp;Specify a conditional compilation expression in "condition". @if ~ @endif can be nested.<br />
<br />

<br />
<code class="bq"><span class="weak">Usage:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;@if(flag==0)&nbsp;&nbsp;<span class="comment">//&nbsp;Variables that have not been assigned anything are considered to be &nbsp;0&nbsp; (false)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@set(flag=1)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;****<br />
&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp;&nbsp;****&nbsp; Compile the script written in the **** part above only once</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;@if(version&gt;=0x02040009)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@if(flag)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;****<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@endif<br />
&nbsp;&nbsp;&nbsp;&nbsp;@endif&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;↑&nbsp; Compile the **** part only when version is 0x02040009 (2.4.9) or higher and flag is other than 0.</span><br />
</code>
<br />

</div></div>
<h1><a id="id277" name="id277">Predefined variables</a>
</h1><div class="para"><div>
　 The <a id="id278" name="id278" class="targanchor"><dfn>version</dfn></a> variable represents the current version of TJS2. <br />
<br />
　As a number, it is in hexadecimal format in 0x0XYYZZZZ, where the X part is the major version, the YY part is the minor version, and ZZZZ is the release number. For example, 0x02040009 is version 2.4.9.</div></div>
	<script type="text/javascript" charset="UTF-8" src="documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="postcontent.js" ></script>
</body>
</html>
